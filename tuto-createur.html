<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
</head>
<body>
<!-- TOC depthFrom:1 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->
<ul>
<li><a href="#tuto-crateur-de-thmes">Tuto créateur de thèmes</a>
<ul>
<li><a href="#se-rendre-sur-linstance">Se rendre sur l'instance</a></li>
<li><a href="#se-connecter-avec-son-compte-openstreetmap">Se connecter avec son compte OpenStreetMap</a></li>
<li><a href="#crer-un-nouveau-thme">Créer un nouveau thème</a></li>
<li><a href="#configurer-le-thme">Configurer le thème</a>
<ul>
<li><a href="#se-golocaliser">Se géolocaliser</a></li>
<li><a href="#configuration-gnrale">Configuration générale</a>
<ul>
<li><a href="#nom-du-thme-description-et-couleurs">Nom du thème, description et couleurs</a></li>
<li><a href="#positionnement-et-golocalisation">Positionnement et géolocalisation</a></li>
<li><a href="#gocodeur-affichage-des-informations-et-statistiques">Géocodeur, Affichage des informations et Statistiques</a></li>
</ul></li>
<li><a href="#fonds-de-carte">Fonds de carte</a></li>
</ul></li>
<li><a href="#crer-une-couche-de-donnes">Créer une couche de données</a>
<ul>
<li><a href="#cas-de-la-requte-overpass">Cas de la requête overpass</a></li>
<li><a href="#tester-sa-requte">Tester sa requête</a>
<ul>
<li><a href="#le-cache-">Le cache !</a></li>
<li><a href="#quelques-bonnes-pratiques">Quelques bonnes pratiques</a></li>
</ul></li>
<li><a href="#cas-du-fichier-csv">Cas du fichier CSV</a></li>
<li><a href="#cas-du-fichier-geojson">Cas du fichier GeoJSON</a></li>
<li><a href="#cas-du-fichier-gpx">Cas du fichier GPX</a></li>
</ul></li>
<li><a href="#configurer-ses-tags">Configurer ses tags</a></li>
<li><a href="#dfinir-les-types-de-noeuds-modles">Définir les types de noeuds, &quot;modèles&quot;</a></li>
<li><a href="#traduire-son-thme">Traduire son thème</a></li>
</ul></li>
</ul>
<!-- /TOC -->
<hr />
<h1 id="tuto-créateur-de-thèmes">Tuto créateur de thèmes</h1>
<p>À l'instar d'<a href="http://openbeermap.github.io">OpenBeerMap</a>, d'<a href="http://osmhydrant.org/">OsmHydrant</a> et de <a href="https://wheelmap.org">wheelmap</a>, MapContrib vise à faciliter la contribution à OpenStreetMap, par la création de thèmes en fonction des TOC (Troubles Obsessionnels Cartographiques) propre à chacun. Ces thèmes se basent sur : - une requête overpass (technique pour aller interroger une copie synchronisée de la base de donnée OpenStreetMap), - la définition de &quot;types de noeuds&quot;,</p>
<p>Ce tutoriel vise à accompagner la création d'un thème. Les pré-requis pour pouvoir le faire sont :</p>
<ul>
<li>l'envie et/ou le besoin,</li>
<li><a href="https://www.openstreetmap.org/user/new">un compte OpenStreetMap</a>,</li>
<li>connaître les tags (clé / valeur) dans <a href="https://wiki.openstreetmap.org/wiki/FR:Page_principale">l'ontologie OpenStreetMap</a>,</li>
<li>connaître une requête <a href="http://overpass-turbo.eu/">OverPass</a>,</li>
</ul>
<h2 id="se-rendre-sur-linstance">Se rendre sur l'instance</h2>
<ul>
<li>Pour ce tutoriel, l'instance utilisée est https://mapcontrib.xyz.</li>
</ul>
<div class="figure">
<img src="images/MapContrib_057.png" alt="Page d&#39;accueil" />
<p class="caption">Page d'accueil</p>
</div>
<h2 id="se-connecter-avec-son-compte-openstreetmap">Se connecter avec son compte OpenStreetMap</h2>
<ul>
<li>Se rendre dans la colonne de paramètres,</li>
<li>Se connecter en utilisant son compte OpenStreetMap,</li>
<li>Accepter que MapContrib accède à votre compte OpenStreetMap,</li>
</ul>
<h3 id="en-images">En images</h3>
<p><img src="images/MapContrib_008.png" alt="Page d&#39;accueil" /> <img src="images/MapContrib_009.png" alt="Colonne" /> <img src="images/MapContrib_010.png" alt="Pop-up OpenStreetMap" /> <img src="images/MapContrib_013.png" alt="Page de connexion OpenStreetMap" /> <img src="images/MapContrib_014.png" alt="Autoriser accès MapContrib" /></p>
<h2 id="créer-un-nouveau-thème">Créer un nouveau thème</h2>
<ul>
<li>Se rendre dans la colonne de paramètres,</li>
</ul>
<p><img src="images/MapContrib_015.png" alt="Page d&#39;accueil connectée" /> <img src="images/MapContrib_016.png" alt="Colonne connectée" /></p>
<p>À noter :</p>
<ul>
<li>la possibilité de retrouver tous les thèmes que l'on a créé,</li>
<li>la possibilité de retrouver ses favoris (des thèmes que l'on a créé ou pas, dont on souhaite garder la trace),</li>
</ul>
<p><img src="images/MapContrib_059.png" alt="Favoris 1" /> <img src="images/MapContrib_060.png" alt="Favoris 1" /> <img src="images/MapContrib_058.png" alt="Favoris 1" /></p>
<h2 id="configurer-le-thème">Configurer le thème</h2>
<p>Un thème porte un titre, peut s'ouvrir sur un territoire particulier et possède quelques options générales décrites ci-dessous. Toutes ses options sont modifiables par la suite.</p>
<h3 id="trouver-un-lieu">Trouver un lieu</h3>
<ul>
<li>la <code>loupe</code> ou au clavier <code>Ctrl+f</code></li>
</ul>
<div class="figure">
<img src="images/MapContrib_024.png" alt="Rechercher un lieu" />
<p class="caption">Rechercher un lieu</p>
</div>
<h3 id="configuration">Configuration</h3>
<p><img src="images/MapContrib_017.png" alt="Configuration" /> <img src="images/MapContrib_018.png" alt="Configuration générale" /></p>
<h4 id="nom-du-thème-description-et-couleurs">Nom du thème, description et couleurs</h4>
<div class="figure">
<img src="images/MapContrib_019.png" alt="Colonne configuration générale - partie 1" />
<p class="caption">Colonne configuration générale - partie 1</p>
</div>
<ul>
<li><code>Nom du thème</code> / apparaît à la fois dans l'url et en haut du thème</li>
<li>si vous changez le titre, même une ancienne url fonctionne car le titre n'est pas pris en compte, seul le code (unique) sert à trouver le thème,</li>
<li>pas d'inquiétudes donc vous pouvez changer le nom de votre thème quand vous voulez :)</li>
<li><code>Description</code> / permet de décrire le sujet de votre thème. Lorsque ce champ est rempli, un i apparaît à coté du nom du thème et permet d'accéder à la description.</li>
</ul>
<div class="figure">
<img src="images/MapContrib_061.png" alt="Colonne configuration générale - partie 1-1" />
<p class="caption">Colonne configuration générale - partie 1-1</p>
</div>
<div class="figure">
<img src="images/MapContrib_062.png" alt="Colonne configuration générale - partie 1-2" />
<p class="caption">Colonne configuration générale - partie 1-2</p>
</div>
<div class="figure">
<img src="images/MapContrib_063.png" alt="Colonne configuration générale - partie 1-3" />
<p class="caption">Colonne configuration générale - partie 1-3</p>
</div>
<h4 id="positionnement-et-géolocalisation">Positionnement et géolocalisation</h4>
<div class="figure">
<img src="images/MapContrib_020.png" alt="Colonne configuration générale - partie 2" />
<p class="caption">Colonne configuration générale - partie 2</p>
</div>
<ul>
<li><code>Positionnement</code> / Enregistrer les paramètres actuels / permet de conserver la géolocalisation et le niveau de zoom pour une personne arrivant sur le thème,</li>
<li><code>Géolocalisation</code> / va demander l'autorisation de se géolocaliser à toute personne arrivant sur le thème,</li>
</ul>
<h4 id="géocodeur-affichage-des-informations-et-statistiques">Géocodeur, Affichage des informations et Statistiques</h4>
<div class="figure">
<img src="images/MapContrib_021.png" alt="Colonne configuration générale - partie 3" />
<p class="caption">Colonne configuration générale - partie 3</p>
</div>
<ul>
<li><code>Géocodeur</code> / permet de définir le géocodeur utilisé lors des recherche (<code>Ctrl+f</code>). Par défaut, Photon est utilisé pour des raisons de fluidité.</li>
<li><code>Affichage des informations</code> / les informations des POI peuvent être affichées dans plusieurs types de fenêtres. Par défaut en colonne à droite, il est aussi possible de changer le comportement du thème en affichant :</li>
<li>des <code>Infobulles</code> / des <code>fenêtres modales</code></li>
</ul>
<p><img src="images/MapContrib_064.png" alt="infobulle" /> <img src="images/MapContrib_065.png" alt="Modales" /></p>
<h3 id="fonds-de-carte">Fonds de carte</h3>
<p>Cela permet de définir les fonds de cartes mis en avant par le créateur du thème. Les contributeurs auront cependant la possibilité d'en choisir d'autres, ceux définis par le créateur du thème sont simplement mis en avant.</p>
<p><img src="images/MapContrib_055.png" alt="Fonds de carte - partie 1" /> <img src="images/MapContrib_056.png" alt="Fonds de carte - partie 2" /></p>
<h2 id="créer-une-couche-de-données">Créer une couche de données</h2>
<p>Plusieurs couches de données peuvent être créées. Cependant, quelques précautions avant de créer une dizaine de couches différentes: - dans les cas des couches &quot;overpass&quot; : <strong>trop de couches simultanées renvoient des erreurs, les serveurs overpass n'appréciant pas d'avoir trop de requêtes provenant d'une même adresse &quot;IP&quot;</strong>, - dans les cas d'autres types de couches : <strong>trop de données peuvent aussi saturer l'explorateur internet, c'est coté client que se passe les calculs !</strong></p>
<p>Donc 4 types de données peuvent être ajoutés : - des données provenant directement d'OpenStreetMap à travers une requête overpass (c'est le coeur de MapContrib),</p>
<p>Mais aussi pour permettre de faire des comparaisons avec les données OSM : - des données dans un fichier csv comportant des titres de colonnes longitude et latitude, - par un fichier GeoJSON, - par un fichier GPX,</p>
<p><img src="images/MapContrib_025.png" alt="Création couches - Partie 1" /> <img src="images/MapContrib_026.png" alt="Création couches - Partie 2" /> <img src="images/MapContrib_027.png" alt="Création couches - Partie 3" /></p>
<h3 id="nom-description-et-visibilité">Nom, Description et Visibilité</h3>
<ul>
<li><code>Nom</code> / définit le nom de cette couche, telle que cela apparaît pour les contributeurs,</li>
<li><code>Description</code> / permet de mieux renseigner le contenu de la couche -&gt; supporte le markdown !
<ul>
<li>exemple ci-dessous de l'insertion d'une image,</li>
</ul></li>
<li><code>Visibilité</code> / va permettre au créateur de thème de préparer de nouvelles couches mais de ne pas les montrer aux contributeurs sur le thème,</li>
</ul>
<p><img src="images/MapContrib_028.png" alt="Création couches - Partie 4" /> <img src="images/MapContrib_067.png" alt="Création couches - Partie 4" /></p>
<h3 id="représentation">Représentation</h3>
<div class="figure">
<img src="images/MapContrib_029.png" alt="Création couches - Partie 4" />
<p class="caption">Création couches - Partie 4</p>
</div>
<p>Dans l'édition de la couche, la possibilité de personnaliser la <code>Représentation</code> sous forme de <code>Points groupables</code> (&quot;clustering&quot; par défaut) ou de <code>Carte thermique</code> (avec quelques options disponibles).</p>
<p><img src="images/MapContrib_082.png" alt="Carte cluster" /> <img src="images/MapContrib_068.png" alt="Carte thermique" /> <img src="images/MapContrib_069.png" alt="Carte thermique, options" /></p>
<h3 id="marqueur">Marqueur</h3>
<div class="figure">
<img src="images/MapContrib_029.png" alt="Création couches - Partie 4" />
<p class="caption">Création couches - Partie 4</p>
</div>
<p>Les <code>marqueurs</code> de chaque couche sont personnalisables : - au niveau de la couleur et de la forme, - avec une bibliothèque d'icônes, - avec un lien vers une image extérieure (assurez vous d'avoir les droits d'utilisation de l'image),</p>
<p><img src="images/MapContrib_070.png" alt="Couleurs et formes marqueurs" /> <img src="images/MapContrib_071.png" alt="Bibliothèques d&#39;icônes" /> <img src="images/MapContrib_072.png" alt="Lien icône externe" /></p>
<h3 id="contenu-des-bulles">Contenu des bulles</h3>
<p>Pour chaque couche, les informations associées peuvent être personnalisées. Pour cela, il faut définir le <code>Contenu des bulles</code> (le markdown est supporté).</p>
<p>De plus, quelque soit la source (overpass, csv, GeoJSON, GPX), les données peuvent être affichées de manière dynamique, en utilisant une clé entre accolade : {clé}.</p>
<p>La clé peut-être &quot;l'en-tête&quot; de colonne du fichier csv ou la clé du couple clé/valeur de l'ontologie OpenStreetMap.</p>
<p><img src="images/MapContrib_073.png" alt="Contenu de la bulle" /> <img src="images/MapContrib_074.png" alt="Résultat dynamique" /></p>
<h3 id="couche-requête-overpass">Couche requête overpass</h3>
<p>Dans le cas d'une couche de type overpass, plusieurs autres personnalisations sont possibles.</p>
<h4 id="zoom-minimum-requête-overpass-et-cache">Zoom minimum, Requête OverPass et Cache</h4>
<div class="figure">
<img src="images/MapContrib_075.png" alt="Couche overpass - Partie 1" />
<p class="caption">Couche overpass - Partie 1</p>
</div>
<ul>
<li><code>Zoom minimum</code> / définit la valeur à laquelle la requête overpass se déclenche,</li>
<li><code>Requête OverPass</code> / Zone pour l'exécution de la requête
<ul>
<li>le temps de requête maximum (timeout) est limité à 120 secondes,</li>
<li>la taille maximale de données rapatriés est limitée à 1 Mo !</li>
</ul></li>
<li><code>Le cache</code>
<ul>
<li>activer le cache présente des avantages et des inconvénients
<ul>
<li>les données se chargent plus rapidement (la requête overpass n'est pas exécutée, les données sont téléchargées depuis leur stockage en cache sur nos serveurs) mais se mettent à jour moins régulièrement (la requête est relancée une fois par jour pour mise à jour),</li>
<li>sur un thème dont le cache est activé, une étoile jaune signale l'ajout d'une donnée depuis le thème aux autres utilisateurs du thème,</li>
</ul></li>
</ul></li>
</ul>
<h3 id="tester-sa-requête">Tester sa requête</h3>
<p>Selon le zoom minimum défini, la requête peut ne pas se déclencher à l'ouverture du thème. Il faudra alors zoomer pour permettre le déclenchement.</p>
<p><img src="images/MapContrib_051.png" alt="Tester sa requête overpass - Partie 1" /> <img src="images/MapContrib_052.png" alt="Tester sa requête overpass - Partie 1" /> <img src="images/MapContrib_053.png" alt="Tester sa requête overpass - Partie 1" /></p>
<h3 id="cas-des-autres-formats-de-fichiers-pour-les-couches">Cas des autres formats de fichiers pour les couches</h3>
<p><strong>Nom, Description, Visibilité, Représentation (groupable ou thermique), Marqueur et Contenu des bulles</strong> fonctionnent de la même manière. Seule la manière de voir des données diffèrent, par l'import d'un fichier depuis son ordinateur. Ces données ne seront ni modifiables, ni déplaçables et n'ont pas d'interactions avec la base de données OpenStreetMap. Ces sources de données peuvent servir de comparaison, vérification de complétude par rapport à une autre source, ...</p>
<h4 id="csv-geojson-gpx">CSV, GeoJSON, GPX</h4>
<p><img src="images/MapContrib_005.png" alt="Fichier CSV - Partie 1" /> <img src="images/MapContrib_006.png" alt="Fichier GeoJSON - Partie 1" /> <img src="images/MapContrib_007.png" alt="Fichier GPX - Partie 1" /></p>
<h2 id="configurer-ses-tags">Configurer ses tags</h2>
<p>La configuration des tags va permettre par la suite de les utiliser : - pour la traduction des types de noeuds (&quot;modèles&quot; / &quot;presets&quot;) : voir paragraphe suivant) - pour l'appel dynamique dans les bulles (&quot;pop-ups&quot;) et donc pour la traduction dans les données dynamiques : cela permet ainsi d'avoir une interface sans aucun mot étranger (souvent un frein pour les contributeurs ni geek ni cartographe ni contributeur).</p>
<p>Vous pouvez créer autant de tags que nécessaire, cependant il faut garder le lien avec la requête overpass... Bien &quot;penser&quot; ce que l'on veut voir, améliorer, ajouter avant de se lancer dans la requête, les tags, les modèles, la traduction !</p>
<p><img src="images/MapContrib_032.png" alt="Définir les tags - Partie 1" /> <img src="images/MapContrib_033.png" alt="Définir les tags - Partie 2" /> <img src="images/MapContrib_034.png" alt="Définir les tags - Partie 3" /></p>
<ul>
<li><p><code>Type</code> / permet de définir différents formats que l'on retrouvera ensuite dans les <strong>Types de noeuds</strong> et différentes présentations !</p>
<ul>
<li>Cases à cocher</li>
<li>liste déroulante avec traduction</li>
</ul></li>
</ul>
<p><img src="images/MapContrib_076.png" alt="Définir les tags - Cases à cocher" /> <img src="images/MapContrib_077.png" alt="Définir les tags - Liste déroulante" /> <img src="images/MapContrib_035.png" alt="Définir les tags - Partie 4" /> <img src="images/MapContrib_036.png" alt="Définir les tags - Partie 5" /> <img src="images/MapContrib_037.png" alt="Définir les tags - Partie 6" /></p>
<h2 id="définir-les-types-de-noeuds-modèles">Définir les types de noeuds, &quot;modèles&quot;</h2>
<p>Les types de noeuds permettent de définir à la fois : - les tags pré-remplis qui pourront être utilisés pour compléter, qualifier des données existantes (fusion des tags entre le noeud existant et le type de noeud), - les tags pré-remplis qui pourront être ajoutés lorsque un noeud est manquant,</p>
<p><img src="images/MapContrib_038.png" alt="Définir les types de noeuds - Partie 1" /> <img src="images/MapContrib_039.png" alt="Définir les types de noeuds - Partie 2" /> <img src="images/MapContrib_040.png" alt="Définir les types de noeuds - Partie 3" /> <img src="images/MapContrib_041.png" alt="Définir les types de noeuds - Partie 4" /> <img src="images/MapContrib_042.png" alt="Définir les types de noeuds - Partie 5" /></p>
<p>Cela se traduit donc pour le contributeur en un noeud &quot;pré-rempli&quot; :</p>
<p><img src="images/MapContrib_081.png" alt="Ajouter un noeud - Partie 1" /> <img src="images/MapContrib_078.png" alt="Ajouter un noeud - Partie 2" /> <img src="images/MapContrib_079.png" alt="Ajouter un noeud - Partie 3" /> <img src="images/MapContrib_080.png" alt="Ajouter un noeud - Partie 3" /></p>
<h2 id="traduire-son-thème">Traduire son thème</h2>
<p>Après avoir rempli l'ensemble des informations il est possible de traduire les thèmes pour qu'il soit adapté en fonction de la langue du navigateur. L'absence de traduction d'une langue entraîne l'utilisation des chaînes de caractères par défaut (donc par défaut remplir les champs comme indiqué ci-dessus, puis traduire seulement les éléments nécessaires / souvent <strong>tags</strong> !). Si vous avez écrit en français sauf les tags, il n'est pas nécessaire de remplir les éléments de traduction concernant la configuration générale, les couches ou les types de noeuds. En l'absence de traductions, ceux sont les contenus écrit initiaux qui sont affichés. Ces traductions seront nécessaires pour que cela fonctionne dans d'autres langues.</p>
<p><img src="images/MapContrib_043.png" alt="Traduction - Partie 1" /> <img src="images/MapContrib_044.png" alt="Traduction - Partie 2" /> <img src="images/MapContrib_045.png" alt="Traduction - Partie 3" /> <img src="images/MapContrib_046.png" alt="Traduction - Partie 4" /> <img src="images/MapContrib_047.png" alt="Traduction - Partie 5" /> <img src="images/MapContrib_049.png" alt="Traduction - Partie 5" /></p>
</body>
</html>
